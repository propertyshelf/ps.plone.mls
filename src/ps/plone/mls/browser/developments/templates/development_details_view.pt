<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="ps.plone.mls"
      tal:omit-tag="">
  <head>
    <metal:baseslot fill-slot="base"
        tal:define="item view/item | nothing;
                    id item/id/value | nothing;">
      <base tal:attributes="href string:${plone_view/renderBase}${id}" /><!--[if lt IE 7]></base><![endif]-->
    </metal:baseslot>
  </head>

  <body>
    <metal:main fill-slot="main">
      <article class="mls detail development"
           metal:define-macro="main"
           tal:define="item view/item | nothing;
                       images item/pictures | nothing;
                       title item/title/value | nothing;">

        <div id="viewlet-above-content-title" tal:content="structure provider:plone.abovecontenttitle" tal:condition="not:ajax_load" />
        <hgroup>
          <h1 class="documentFirstHeading">
            <span tal:replace="title">[Title]</span>
          </h1>
        </hgroup>
        <div id="viewlet-below-content-title" tal:content="structure provider:plone.belowcontenttitle" tal:condition="not:ajax_load" />

        <p class="documentDescription">
          <picture class="overview__logo"
              tal:define="image item/logo | nothing"
              tal:condition="image"><a href="" rel="prettyPhoto[item]"
              tal:attributes="href image/value">
            <img src="" title="" alt=""
                tal:attributes="src image/value;
                                title title;
                                alt title;" />
              </a>
          </picture>
          <span tal:replace="item/description/value | nothing" />
        </p>

        <div id="viewlet-above-content-body" tal:content="structure provider:plone.abovecontentbody" tal:condition="not:ajax_load" />

        <div id="content-core" tal:condition="item">
          <section class="development__overview">
            <h2 class="" i18n:translate="">Development Facts</h2>
            <table class="vertical listing overview__table">
              <tbody>
                <tr tal:define="field item/location | nothing" tal:condition="field">
                  <th class="location" tal:content="field/title">[Label]</th>
                  <td class="location" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/lot_size | nothing" tal:condition="field">
                  <th class="lot_size" tal:content="field/title">[Label]</th>
                  <td class="lot_size" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/location_type | nothing" tal:condition="field">
                  <th class="location_type" tal:content="field/title">[Label]</th>
                  <td class="location_type" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/geographic_type | nothing" tal:condition="field">
                  <th class="geographic_type" tal:content="field/title">[Label]</th>
                  <td class="geographic_type" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/precipitation_type | nothing" tal:condition="field">
                  <th class="precipitation_type" tal:content="field/title">[Label]</th>
                  <td class="precipitation_type" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/precipitation | nothing" tal:condition="field">
                  <th class="precipitation" tal:content="field/title">[Label]</th>
                  <td class="precipitation" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/amenities | nothing" tal:condition="field">
                  <th class="amenities" tal:content="field/title">[Label]</th>
                  <td class="amenities" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/number_of_listings | nothing" tal:condition="field">
                  <th class="number_of_listings" tal:content="field/title">[Label]</th>
                  <td class="number_of_listings" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/number_of_phases | nothing" tal:condition="field">
                  <th class="number_of_phases" tal:content="field/title">[Label]</th>
                  <td class="number_of_phases" tal:content="structure field/value">[Value]</td>
                </tr>
                <tr tal:define="field item/number_of_groups | nothing" tal:condition="field">
                  <th class="number_of_groups" tal:content="field/title">[Label]</th>
                  <td class="number_of_groups" tal:content="structure field/value">[Value]</td>
                </tr>
              </tbody>
            </table>
            <p class="overview__long_description"
                tal:define="text item/long_description | nothing"
                tal:condition="text"
                tal:content="text/value"></p>
              <div class="visualClear"
                  tal:define="video item/video_embedding | nothing"
                  tal:condition="video"
                  tal:content="structure video/value"></div>
          </section>

          <section class="development__phases"
              tal:define="phases item/phases | nothing"
              tal:condition="phases">
            <h2 i18n:translate="">Construction Status</h2>

            <table class="listing phases__table">
              <thead
                  tal:define="titles view/titles_for_phases | nothing"
                  tal:condition="titles">
                <tr>
                  <th class="title" tal:content="titles/title | nothing">[Phase Name]</th>
                  <th class="units" tal:content="titles/units | nothing">[Number of Units]</th>
                  <th class="unit_types" tal:content="titles/unit_types | nothing">[Available Unit Types]</th>
                  <th class="status" tal:content="titles/status | nothing">[Status]</th>
                  <th class="completion_date" tal:content="titles/completion_date | nothing">[Completion Date]</th>
                  <th class="number_of_listings" tal:content="titles/number_of_listings | nothing">[Number of Listings]</th>
                </tr>
              </thead>
              <tbody>
                <tr tal:repeat="phase phases">
                  <td class="title" tal:content="phase/title/value | string:-">[Title]</td>
                  <td class="units" tal:content="phase/units/value | string:-">[Units]</td>
                  <td class="unit_types" tal:content="phase/unit_types/value | string:-">[Unit Types]</td>
                  <td class="status" tal:content="phase/status/value | string:-">[Status]</td>
                  <td class="completion_date" tal:content="phase/completion_date/value | string:-">[Completion Date]</td>
                  <td class="number_of_listings" tal:content="phase/number_of_listings/value | string:-">[Number of Listings]</td>
                </tr>
              </tbody>
            </table>
          </section>

          <section class="development__groups"
              tal:define="groups item/groups | nothing"
              tal:condition="groups">
            <h2 i18n:translate="">Properties Available</h2>

            <table class="listing groups__table">
              <thead
                  tal:define="titles view/titles_for_groups | nothing"
                  tal:condition="titles">
                <tr>
                  <th class="title" tal:content="titles/title | nothing">[Group Name]</th>
                  <th class="lot_size" tal:content="titles/lot_size | nothing">[Lot Size]</th>
                  <th class="interior_area" tal:content="titles/interior_area | nothing">[Interior Area]</th>
                  <th class="beds_baths" tal:content="titles/beds_baths | nothing">[Beds/Baths]</th>
                  <th class="status" tal:content="titles/status | nothing">[Status]</th>
                  <th class="starting_price" tal:content="titles/starting_price | nothing">[Starting Price]</th>
                  <th class="number_of_listings" tal:content="titles/number_of_listings | nothing">[Number of Listings]</th>
                </tr>
              </thead>
              <tbody>
                <tr tal:repeat="group groups">
                  <td class="title" tal:content="group/title/value | string:-">[Title]</td>
                  <td class="lot_size" tal:content="group/lot_size/value | string:-">[Lot Size]</td>
                  <td class="interior_area" tal:content="group/interior_area/value | string:-">[Interior Area]</td>
                  <td class="beds_baths" tal:content="group/beds_baths/value | string:-">[Beds/Baths]</td>
                  <td class="status" tal:content="group/status/value | string:-">[Status]</td>
                  <td class="starting_price" tal:content="group/starting_price/value | string:-">[Starting Price]</td>
                  <td class="number_of_listings" tal:content="group/number_of_listings/value | string:-">[Number of Listings]</td>
                </tr>
              </tbody>
            </table>
          </section>

          <section class="development__projectmap"
              tal:define="projectmap item/projectmap | nothing"
              tal:condition="projectmap">
            <h2 i18n:translate="">Project Map</h2>
          </section>

          <section class="development__gallery"
              tal:condition="images"
              tal:define="lead_image item/lead_image | python: images[0] or None;
                          use_fotorama view/use_fotorama | nothing;
                          use_galleria view/use_galleria | nothing;">
            <h2 i18n:translate="">Gallery</h2>
            <tal:leadimage tal:condition="python: not images and lead_image">
              <a href="" rel="prettyPhoto[listing]" class="preview"
                 tal:condition="lead_image"
                 tal:attributes="href lead_image/large;
                                 title lead_image/title | nothing;"><img src=""
                 tal:attributes="src lead_image/preview" /></a>
            </tal:leadimage>

            <tal:fotorama tal:condition="python: images and use_fotorama">
              <div class="fotorama"
                   data-allow-full-screen="native"
                   data-autoplay="true"
                   data-loop="true"
                   data-nav="thumbs"
                   data-ratio="3/2"
                   data-width="100%">
                <tal:images tal:repeat="image images">
                  <a href="" data-caption=""
                     tal:define="caption image/title;
                                 description image/description | nothing;
                                 caption python: description and ' - '.join([caption, description]) or caption"
                     tal:attributes="href python: image.get('url');
                                     data-caption caption"><img src="" alt=""
                     tal:attributes="src python: image.get('thumb');
                                     title image/title;
                                     alt image/description;" /></a>
                </tal:images>
              </div>
              <script type="text/javascript">
                jQuery(function(jq) {
                  jq('#listing-images > div').addClass('fotorama');
                  jq('.fotorama').fotorama();
                });
              </script>
            </tal:fotorama>

            <tal:galleria tal:condition="python: images and use_galleria">
              <ul class="thumbnails"
                  tal:condition="images" style="list-style: none; margin-left: 0;">
                <li tal:repeat="image images" style="display: inline-block; padding: 0.5em;"><a href="" rel="prettyPhoto[gallery]"
                    tal:attributes="href image/get;
                                    title image/title | nothing;"><img src="" alt="" title=""
                    tal:attributes="src python: image.get('thumb');
                                    alt image/title | nothing;
                                    title image/description | nothing" /></a></li>
              </ul>
              <script type="text/javascript" src="++resource++plone.mls.listing.javascript/galleria-1.2.2.js"></script>
              <script type="text/javascript" src="++resource++plone.mls.listing.javascript/classic/galleria.classic.min.js"></script>
            </tal:galleria>
          </section>

          <section class="development__map"
               tal:define="js view/javascript_map | nothing"
               tal:condition="js">
            <h2 i18n:translate="" tal:replace="nothing">Map & Distances</h2>
            <h2 i18n:translate="">Map</h2>
            <div class="map__canvas" id="map"
                tal:attributes="id view/map_id">Please enable JavaScript to show the Map.</div>
            <script type="text/javascript" tal:content="structure js"></script>
          </section>

          <section class="development__area"
              tal:define="text item/area_description | nothing"
              tal:condition="text">
            <h2 i18n:translate="">About the Area</h2>
            <picture class="area__picture"
                tal:define="image item/area_picture | nothing"
                tal:condition="image"><a href="" rel="prettyPhoto[item]"
                tal:attributes="href image/value"><img src="" title="" alt=""
                tal:attributes="src image/value;
                                title title;
                                alt title;" /></a></picture>
            <p class="area__description"
                tal:content="text/value"></p>
          </section>

          <section class="development__representatives"
              tal:define="representatives item/representatives | nothing"
              tal:condition="representatives">
            <h2 i18n:translate="">Meet the Developers</h2>
            <div class="visualClear representatives__item"
                tal:repeat="agent representatives">

              <tal:agent
                  tal:define="avatar agent/avatar | nothing;
                              name agent/name | nothing;"
                  tal:condition="name">
                <picture class="representative__avatar"
                    tal:condition="avatar"><a href="" rel="prettyPhoto[item]"
                    tal:attributes="href avatar/value"><img src="" title="" alt=""
                    tal:attributes="src avatar/value;
                                    title name/value;
                                    alt name/value;" /></a></picture>
                <h3 class="representative__name"
                    tal:content="name/value">[Developer Name]</h3>
                <p class="representative__user_title"
                    tal:define="user_title agent/user_title/value | nothing"
                    tal:condition="user_title"
                    tal:content="user_title">[Developer Title]</p>
                <p class="representative__personal_description"
                    tal:define="text agent/personal_description/value | nothing"
                    tal:condition="text"
                    tal:content="text">[Personal Description]</p>
              </tal:agent>
            </div>
          </section>

          <section class="development__contact">
            <h2 i18n:translate="">Contact Us</h2>
          </section>
        </div>

        <div id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" tal:condition="not:ajax_load" />
      </article>
    </metal:main>
  </body>

</html>
